#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                gregg.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SHARED   -a-  create central testing directory                                   0s   tbd             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  ((aa.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       make the directory                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((aa.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call create                          yURG_mkdir                  "/tmp/lib"                        , "root"      , "root"       , "0600"                               i_equal     0                                                                                                    
     exec     call create                          yURG_mkdir                  "/tmp/lib/gregg"                  , "root"      , "root"       , "0600"                               i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SHARED   -b-  remove central testing directory                                   0s   tbd             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  ((bb.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       remove the directory                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((bb.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call create                          yURG_rmdir                  "/tmp/lib/gregg"                                                                                      i_equal     0                                                                                                    
     exec     call create                          yURG_rmdir                  "/tmp/lib"                                                                                            i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify reading and writing database header                    0s   header          DB__open                                                                     ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working/return variable       - - - - - - - - - - - - -   int      x_nfile, x_nbase, x_nword;                                                                                                                                                                                        
     local    create working/return variable       - - - - - - - - - - - - -   FILE    *x_file  = NULL;                                                                                                                                                                                                   
     local    create working variable              - - - - - - - - - - - - -   char      x_name    [LEN_DESC]  = "/tmp/lib/gregg/gregg.db";                                                                                                                                                               
     local    create working variable              - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      

   REUSE -a-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify output file does not exist                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     -1                                                                                                   

   COND       attempt open with missing pointers                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   DB__open                    NULL           , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 0         , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 'w'       , NULL      , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , NULL      , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , NULL      , x_heart   , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , NULL      , &x_file                  i_lesser    0                                                                                                    
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , NULL                     i_lesser    0                                                                                                    

   COND       attempt close with missing pointers                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database close                  DB__close                   NULL                                                                                                  i_lesser    0                                                                                                    

   COND       attempt to close un-open file                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database close                  DB__close                   &x_file                                                                                               i_lesser    0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_null      0                                                                                                    

   COND       attempt to read missing file                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   DB__open                    x_name         , 'r'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_null      0                                                                                                    

   COND       verify openning                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_exists    0                                                                                                    

   COND       attempt to re-open already open file                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_lesser    0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_exists    0                                                                                                    

   COND       verify closing open file                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_null      0                                                                                                    

   COND       attempt to close grounded file                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database close                  DB__close                   &x_file                                                                                               i_lesser    0                                                                                                    
     echo     ... review file pointer              - - - - - - - - - - - - -   x_file                                                                                                p_null      0                                                                                                    

   COND       verify writing the header                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     
     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = 3;   x_nbase = 513;  x_nword = 1234567;                                                                                                                                                                        
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     0                                                                                                    

   COND       verify reading the header                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update heartbeat                     - - - - - - - - - - - - -   strcpy (x_heart, "nunca");                                                                                                                                                                                                 
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     ånuncaæ                                                                                              
     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = -1;  x_nbase = -1;   x_nword = -1;                                                                                                                                                                             
     exec     call database open                   DB__open                    x_name         , 'r'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nfile                                                                                               i_equal     3                                                                                                    
     echo     ... review base count                - - - - - - - - - - - - -   x_nbase                                                                                               i_equal     513                                                                                                  
     echo     ... review word count                - - - - - - - - - - - - -   x_nword                                                                                               i_equal     1234567                                                                                              
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     

   REUSE -b-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify adding and purging sources                             0s   src_add         DB_source_add, DB_source_purge                                               ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    

   COND  (0)  confirm initial state                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... check count                      DB__source_count                                                                                                                  i_equal     0                                                                                                    
     get      ... check source                     DB__source_detail           0                                                                                                     w_equal     åæ                                                                                                   
     get      ... check source                     DB__source_detail           1                                                                                                     w_equal     åæ                                                                                                   
     get      ... check source                     DB__source_detail           2                                                                                                     w_equal     åæ                                                                                                   

   COND       verify adding a single source                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             DB_source_add               "/var/lib/gregg/gregg_p.dict"                                                                         i_equal     0                                                                                                    
     get      ... check count                      DB__source_count                                                                                                                  i_equal     1                                                                                                    
     get      ... check source                     DB__source_detail           0                                                                                                     w_equal     å/var/lib/gregg/gregg_p.dictæ                                                                                                   
     get      ... check source                     DB__source_detail           1                                                                                                     w_equal     åæ                                                                                                   
     get      ... check source                     DB__source_detail           2                                                                                                     w_equal     åæ                                                                                                   

   COND       verify appending another                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             DB_source_add               "/home/member/manual.dict"                                                                            i_equal     0                                                                                                    
     get      ... check count                      DB__source_count                                                                                                                  i_equal     2                                                                                                    
     get      ... check source                     DB__source_detail           0                                                                                                     w_equal     å/var/lib/gregg/gregg_p.dictæ                                                                                                   
     get      ... check source                     DB__source_detail           1                                                                                                     w_equal     å/home/member/manual.dictæ                                                                                                   
     get      ... check source                     DB__source_detail           2                                                                                                     w_equal     åæ                                                                                                   

   COND       verify purging all                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           DB_source_purge                                                                                                                   i_equal     0                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify reading and writing sources                            0s   src_db          DB__source_read, DB__source_write                                            ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working/return variable       - - - - - - - - - - - - -   int      x_nfile, x_nbase, x_nword;                                                                                                                                                                                        
     local    create working/return variable       - - - - - - - - - - - - -   FILE    *x_file  = NULL;                                                                                                                                                                                                   
     local    create working variable              - - - - - - - - - - - - -   char      x_name    [LEN_DESC]  = "/tmp/lib/gregg/gregg.db";                                                                                                                                                               
     local    create working variable              - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      

   COND  (0)  confirm initial state                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... check count                      DB__source_count                                                                                                                  i_equal     0                                                                                                    
     get      ... check source                     DB__source_detail           0                                                                                                     w_equal     åæ                                                                                                   
     get      ... check source                     DB__source_detail           1                                                                                                     w_equal     åæ                                                                                                   
     get      ... check source                     DB__source_detail           2                                                                                                     w_equal     åæ                                                                                                   

   COND       verify adding a couple sources                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             DB_source_add               "/var/lib/gregg/gregg_p.dict"                                                                         i_equal     0                                                                                                    
     exec     call add                             DB_source_add               "/home/member/manual.dict"                                                                            i_equal     0                                                                                                    

   COND  (1)  confirm sources                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... check count                      DB__source_count                                                                                                                  i_equal     2                                                                                                    
     get      ... check source                     DB__source_detail           0                                                                                                     w_equal     å/var/lib/gregg/gregg_p.dictæ                                                                                                   
     get      ... check source                     DB__source_detail           1                                                                                                     w_equal     å/home/member/manual.dictæ                                                                                                   
     get      ... check source                     DB__source_detail           2                                                                                                     w_equal     åæ                                                                                                   

   REUSE -a-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify writing to database                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     
     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = my.r_nfile;  x_nbase = 0;  x_nword = 0;                                                                                                                                                                           
     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
     exec     call source write                    DB__source_write            x_file                                                                                                i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     0                                                                                                    

   COND       verify purging all                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           DB_source_purge                                                                                                                   i_equal     0                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify reading from database                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update heartbeat                     - - - - - - - - - - - - -   strcpy (x_heart, "nunca");                                                                                                                                                                                                 
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     ånuncaæ                                                                                              
     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = -1;  x_nbase = -1;   x_nword = -1;                                                                                                                                                                             
     exec     call database open                   DB__open                    x_name         , 'r'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
     exec     call source read                     DB__source_read             x_nfile      , x_file                                                                                 i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nfile                                                                                               i_equal     2                                                                                                    
     echo     ... review base count                - - - - - - - - - - - - -   x_nbase                                                                                               i_equal     0                                                                                                    
     echo     ... review word count                - - - - - - - - - - - - -   x_nword                                                                                               i_equal     0                                                                                                    
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     

   DITTO (1)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -b-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
#SCRP          (DB) verify reading and writing words                              0s   word_db         DB__word_write, DB__word_read                                                ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#
#   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
#     local    create working/return variable       - - - - - - - - - - - - -   int      x_nfile, x_nbase, x_nword;                                                                                                                                                                                        
#     local    create working/return variable       - - - - - - - - - - - - -   FILE    *x_file  = NULL;                                                                                                                                                                                                   
#     local    create working variable              - - - - - - - - - - - - -   char      x_name    [LEN_DESC]  = "/tmp/lib/gregg/gregg.db";                                                                                                                                                               
#     local    create working variable              - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      
#
#   COND  (0)  verify empty data                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     get      ... check the counts                 WORDS_eng_count                                                                                                                   i_equal     0                                                                                                    
#     get      ... check entry                      WORDS_entry                 0                                                                                                     s_equal     n/a                                                                                                  
#     get      ... check entry                      WORDS_entry                 1                                                                                                     s_equal     n/a                                                                                                  
#     get      ... check entry                      WORDS_entry                 2                                                                                                     s_equal     n/a                                                                                                  
#     echo     ... review source count              - - - - - - - - - - - - -   my.r_nfile                                                                                            i_equal     0                                                                                                    
#     echo     ... review base count                - - - - - - - - - - - - -   my.r_nbase                                                                                            i_equal     0                                                                                                    
#     echo     ... review word count                - - - - - - - - - - - - -   my.r_nword                                                                                            i_equal     0                                                                                                    
#
#   COND       add a testing database of words                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     exec     call record parsing                  DICT__parse_easy            2 , "let   § · § l·e    § v r · · ° §"                                                                i_equal     0                                                                                                    
#     exec     call record parsing                  DICT__parse_easy            5 , "teach § · § t·e·ch § v / · · · § · § ´) teaching  § s) teaches § d) taught   §"                  i_equal     0                                                                                                    
#     exec     call record parsing                  DICT__parse_easy            10, "weak  § · § u·e·k  § · · · · · § · § ´) weakening § s) weakens § d) weakened §"                  i_equal     0                                                                                                    
#     exec     call record parsing                  DICT__parse_easy            15, "hope  § · § h·o·p  § · · · · · § · § ´) hoping    § s) hopes   § d) hoped    §"                  i_equal     0                                                                                                    
#
#   COND  (1)  verify full data                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     get      ... check the counts                 WORDS_eng_count                                                                                                                   i_equal     13                                                                                                   
#     get      ... check entry                      WORDS_entry                 0                                                                                                     s_equal     0      4åhopeæ                   0/  15    3  <     · ·  · · 0    · 0      5åh·o·pæ                 ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 1                                                                                                     s_equal     1      5åhopedæ                  0/  15    3  d     · ·  · · 0    · 0      9åh·o·p·>·dæ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 2                                                                                                     s_equal     2      5åhopesæ                  0/  15    3  s     · ·  · · 0    · 0      9åh·o·p·>·sæ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 3                                                                                                     s_equal     3      6åhopingæ                 0/  15    3  ´     · ·  · · 0    · 0      9åh·o·p·>·´æ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 4                                                                                                     s_equal     4      3åletæ                    0/   2    0  <     v r  · ° 0    · 0      3ål·eæ                   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 5                                                                                                     s_equal     5      6åtaughtæ                 0/   5    1  d     v /  · · 0    · 0     10åt·e·ch·>·dæ            ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 6                                                                                                     s_equal     6      5åteachæ                  0/   5    1  <     v /  · · 0    · 0      6åt·e·chæ                ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 7                                                                                                     s_equal     7      7åteachesæ                0/   5    1  s     v /  · · 0    · 0     10åt·e·ch·>·sæ            ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 8                                                                                                     s_equal     8      8åteachingæ               0/   5    1  ´     v /  · · 0    · 0     10åt·e·ch·>·´æ            ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 9                                                                                                     s_equal     9      4åweakæ                   0/  10    2  <     · ·  · · 0    · 0      5åu·e·kæ                 ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 10                                                                                                    s_equal     10     8åweakenedæ               0/  10    2  d     · ·  · · 0    · 0      9åu·e·k·>·dæ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 11                                                                                                    s_equal     11     9åweakeningæ              0/  10    2  ´     · ·  · · 0    · 0      9åu·e·k·>·´æ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 12                                                                                                    s_equal     12     7åweakensæ                0/  10    2  s     · ·  · · 0    · 0      9åu·e·k·>·sæ             ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬ 
#     get      ... check entry                      WORDS_entry                 13                                                                                                    s_equal     n/a                                                                                                  
#     echo     ... review source count              - - - - - - - - - - - - -   my.r_nfile                                                                                            i_equal     0                                                                                                    
#     echo     ... review base count                - - - - - - - - - - - - -   my.r_nbase                                                                                            i_equal     4                                                                                                    
#     echo     ... review word count                - - - - - - - - - - - - -   my.r_nword                                                                                            i_equal     13                                                                                                   
#
#   REUSE -a-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#
#   COND       verify writing to database                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  
#     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     
#     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = 0;           x_nbase = my.r_nbase;     x_nword = my.r_nword;                                                                                                                                                      
#     exec     call database open                   DB__open                    x_name         , 'w'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
#     exec     call word write                      DB__word_write              x_file                                                                                                i_equal     0                                                                                                    
#     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
#     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     0                                                                                                    
#
#   COND       verify purging words                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     exec     call purge                           WORDS_purge                                                                                                                       i_equal     0                                                                                                    
#
#   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#
#   COND       verify reading from database                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     code     update heartbeat                     - - - - - - - - - - - - -   strcpy (x_heart, "nunca");                                                                                                                                                                                                 
#     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     ånuncaæ                                                                                              
#     code     ... prepare stats                    - - - - - - - - - - - - -   x_nfile   = -1;  x_nbase = -1;   x_nword = -1;                                                                                                                                                                             
#     exec     call database open                   DB__open                    x_name         , 'r'       , &x_nfile  , &x_nbase  , &x_nword  , x_heart   , &x_file                  i_equal     0                                                                                                    
#     exec     call word read                       DB__word_read               x_nword      , x_file                                                                                 i_equal     0                                                                                                    
#     exec     call database close                  DB__close                   &x_file                                                                                               i_equal     0                                                                                                    
#     echo     ... review file count                - - - - - - - - - - - - -   x_nfile                                                                                               i_equal     0                                                                                                    
#     echo     ... review base count                - - - - - - - - - - - - -   x_nbase                                                                                               i_equal     4                                                                                                    
#     echo     ... review word count                - - - - - - - - - - - - -   x_nword                                                                                               i_equal     13                                                                                                   
#     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     å17.05.13.06.00.00.6.19.133  1494680400   ¬¬¬¬¬æ                                                     
#
#   DITTO (1)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#
#   REUSE -b-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#
#   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    




# end-of-file.  done, finito, completare, whimper [Ï´···
